<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="invoicePosP" pageWidth="210" pageHeight="350" columnWidth="196" leftMargin="7" rightMargin="7" topMargin="5" bottomMargin="5" isFloatColumnFooter="true" isIgnorePagination="true">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<style name="Sinhala" mode="Opaque" hAlign="Left" vAlign="Middle" fontName="FMMalithi" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false">
		<conditionalStyle>
			<conditionExpression><![CDATA[$F{itemname} == ""]]></conditionExpression>
			<style mode="Opaque" forecolor="#000000" fill="Solid" hAlign="Left" vAlign="Middle" fontName="Ubuntu" fontSize="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false"/>
		</conditionalStyle>
	</style>
	<parameter name="shopName" class="java.lang.String"/>
	<parameter name="invoiceNo" class="java.lang.String"/>
	<queryString>
		<![CDATA[select invoice_detail_invoice_no,invoice_id, invoice_detail_item_id, item_barcode, invoice_detail_item_qty, invoice_detail_unit,
invoice_detail_unit_price, invoice_detail_selling_price, invoice_payment_id, invoice_payment_date, invoice_payment_total,
invoice_payment_discount_rate, invoice_payment_discount_value, invoice_payment_cash, invoice_payment_discounted_total,(invoice_detail_selling_price*invoice_detail_item_qty) as total,
invoice_payment_invoice_no, invoice_id, invoice_time, invoice_total, invoice_item_qty, user_name from
invoice_detail left join item on invoice_detail_item_id= item_id left join invoice_payment on
invoice_detail_invoice_no=invoice_payment_invoice_no left join invoice on invoice_detail_invoice_no = invoice_id left join user on invoice_user_id=user_id where invoice_detail_invoice_no = $P{invoiceNo}]]>
	</queryString>
	<field name="invoice_detail_invoice_no" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_detail_item_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="item_barcode" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_detail_item_qty" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_detail_unit" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_detail_unit_price" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_detail_selling_price" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_total" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_discount_rate" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_discount_value" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_cash" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_payment_discounted_total" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="total" class="java.math.BigDecimal"/>
	<field name="invoice_payment_invoice_no" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_time" class="java.sql.Time">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_total" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="invoice_item_qty" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="user_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="discount" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{invoice_payment_total}.subtract($F{invoice_payment_discounted_total})]]></variableExpression>
	</variable>
	<variable name="balance" class="java.math.BigDecimal">
		<variableExpression><![CDATA[$F{invoice_payment_cash}.subtract($F{invoice_payment_discounted_total})]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="83" splitType="Stretch">
			<textField>
				<reportElement x="2" y="0" width="192" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{shopName}]]></textFieldExpression>
			</textField>
			<textField pattern="dd-MMM-yyyy">
				<reportElement x="89" y="22" width="105" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_payment_date}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="80" width="196" height="1"/>
			</line>
			<staticText>
				<reportElement x="0" y="66" width="69" height="12"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Item ]]></text>
			</staticText>
			<staticText>
				<reportElement x="69" y="66" width="43" height="12"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Price]]></text>
			</staticText>
			<staticText>
				<reportElement x="112" y="66" width="28" height="12"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Qty]]></text>
			</staticText>
			<staticText>
				<reportElement x="140" y="66" width="56" height="12"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="22" width="49" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<textField pattern="h.mm a">
				<reportElement x="89" y="32" width="105" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_time}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="32" width="49" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Time]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="42" width="49" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Cashier]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="89" y="42" width="105" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{user_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="89" y="52" width="105" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_detail_invoice_no}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="1" y="52" width="49" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Invoice No]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="27" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="0" width="196" height="12"/>
				<textElement>
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{item_barcode}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="69" y="13" width="43" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_detail_selling_price}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="112" y="13" width="28" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_detail_item_qty}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="140" y="13" width="56" height="12"/>
				<textElement textAlignment="Right">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<lastPageFooter>
		<band height="46">
			<staticText>
				<reportElement x="1" y="36" width="193" height="8"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="6"/>
				</textElement>
				<text><![CDATA[Pharmacy And Medical Center Systems By - Cazzendra Labs]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="0" width="49" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="6"/>
				</textElement>
				<text><![CDATA[* Special Notes]]></text>
			</staticText>
		</band>
	</lastPageFooter>
	<summary>
		<band height="90" splitType="Stretch">
			<staticText>
				<reportElement x="1" y="10" width="69" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Invoice Total]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="20" width="69" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Discount]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="30" width="69" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Discounted Total]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="50" width="69" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Paid]]></text>
			</staticText>
			<staticText>
				<reportElement x="1" y="60" width="69" height="10"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<text><![CDATA[Balance]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="94" y="30" width="100" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_payment_discounted_total}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="94" y="10" width="100" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_payment_total}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="94" y="20" width="100" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{discount}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="94" y="50" width="100" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{invoice_payment_cash}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="94" y="60" width="100" height="10"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Ubuntu" size="8" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{balance}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="7" width="196" height="1"/>
			</line>
			<line>
				<reportElement x="140" y="72" width="56" height="1"/>
			</line>
		</band>
	</summary>
</jasperReport>
